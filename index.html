<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 Vesak Global Lighting | è¡›å¡ç¯€å…¨çƒé»ç‡ˆ</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root { --gold: #d4af37; --deep-red: #b71c1c; }
        body { 
            margin: 0; 
            background: #f8f9fa; /* æ”¹ç‚ºæ·ºç°è‰²èƒŒæ™¯ï¼Œé…åˆæ˜äº®åœ°åœ– */
            color: #333; 
            font-family: "Microsoft JhengHei", sans-serif; 
            display: flex; flex-direction: column; align-items: center; 
        }
        
        /* é ‚éƒ¨å°è¦½å„ªåŒ– */
        .brand-header { position: absolute; top: 20px; left: 20px; font-size: 14px; color: var(--deep-red); font-weight: bold; z-index: 1000; text-align: left; }
        .lang-switch { position: absolute; top: 20px; right: 20px; z-index: 1000; }
        .lang-switch button { background: white; border: 1.5px solid var(--gold); color: var(--gold); padding: 5px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .lang-switch button:hover { background: var(--gold); color: white; }

        /* é¢æ¿å„ªåŒ–ï¼šç£¨ç ‚ç»ç’ƒæ•ˆæœ */
        .header-section { 
            text-align: center; margin-top: 30px; 
            background: rgba(255, 255, 255, 0.8); 
            padding: 20px; border-radius: 20px; 
            backdrop-filter: blur(10px); 
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            margin-bottom: 20px;
        }
        .buddha-img { width: 180px; filter: drop-shadow(0 0 15px rgba(212, 175, 55, 0.4)); margin-bottom: 15px; }
        .slogan-main { font-size: 24px; font-weight: bold; color: var(--deep-red); margin-bottom: 8px; }
        .slogan-sub { color: #666; font-size: 14px; margin-bottom: 15px; }
        
        .counter-box { 
            display: inline-block; 
            border: 2px solid var(--gold); 
            padding: 8px 25px; 
            border-radius: 50px; 
            font-size: 18px; 
            color: var(--deep-red); 
            background: white; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        #map { 
            width: 85%; max-width: 900px; height: 420px; 
            border-radius: 20px; border: 2px solid white; 
            box-shadow: 0 15px 45px rgba(0,0,0,0.1); 
        }
        
        /* è“®èŠ±ç‡ˆ SVG å‘¼å¸æ•ˆæœ */
        .lotus-marker { width: 45px; height: 45px; z-index: 9999 !important; animation: lotusBreathe 3s infinite ease-in-out; }
        @keyframes lotusBreathe {
            0%, 100% { transform: scale(0.9); opacity: 0.8; filter: drop-shadow(0 0 8px var(--gold)); }
            50% { transform: scale(1.1) translateY(-5px); opacity: 1; filter: drop-shadow(0 0 20px var(--gold)); }
        }
        .leaflet-popup-content-wrapper { background: rgba(10, 25, 47, 0.95); color: white; border: 1px solid var(--gold); text-align: center; }
        .quote-zh { color: var(--gold); font-size: 1.1em; font-weight: bold; margin-bottom: 5px; }
        .quote-en { color: #ccd6f6; font-style: italic; font-size: 0.85em; }
   /* --- æ‰‹æ©Ÿç‰ˆè‡ªå‹•èª¿æ•´é–‹é—œ --- */
@media (max-width: 768px) {
    /* è®“ä½›åƒç¸®å°ï¼Œä¸ä½”æ»¿æ•´å€‹æ‰‹æ©Ÿè¢å¹• */
    .buddha-img { width: 140px; }
    
    /* è®“æ¨™é¡Œèˆ‡èªè¨€æŒ‰éˆ•æ”¹ç‚ºä¸Šä¸‹æ’åˆ—ï¼Œä¸æœƒé‡ç–Š */
    .brand-header { 
        position: relative; top: 10px; left: 0; 
        text-align: center; width: 100%; 
    }
    .lang-switch { 
        position: relative; top: 15px; right: 0; 
        text-align: center; width: 100%; margin-bottom: 20px;
    }
    
    /* è®“ä¸»è¦æ¨™èªå­—é«”ç¸®å°ä¸€é» */
    .slogan-main { font-size: 20px; padding: 0 15px; }

    /* åœ°åœ–é«˜åº¦åœ¨æ‰‹æ©Ÿä¸Šç¸®çŸ­ï¼Œæ–¹ä¾¿æ»‘å‹•é é¢ */
    #map { width: 95%; height: 320px; }
}
   /* å®šä½æŒ‰éˆ•æ¨£å¼ */
        .locate-btn {
            position: absolute; bottom: 30px; right: 30px; z-index: 1000;
            background: white; border: none; width: 50px; height: 50px;
            border-radius: 50%; cursor: pointer; font-size: 24px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15); display: flex;
            align-items: center; justify-content: center; transition: 0.3s;
        }
        .locate-btn:hover { transform: scale(1.1); }

        /* æ‰‹æ©Ÿç‰ˆ RWD é€²éšå„ªåŒ–ï¼šç¢ºä¿å®šä½æŒ‰éˆ•ä¸æœƒæ“‹ä½åœ°åœ– */
        @media (max-width: 768px) {
            .locate-btn { width: 44px; height: 44px; bottom: 20px; right: 15px; font-size: 20px; }
        }
   /* è®“å½ˆå‡ºè¦–çª—çš„é—œé–‰æŒ‰éˆ•è®Šå¤§ä¸”è®Šé‡‘è‰² */
        .leaflet-container a.leaflet-popup-close-button {
            color: #d4af37 !important; /* é‡‘è‰² */
            font-size: 24px;           /* å­—é«”æ”¾å¤§ */
            padding: 8px !important;   /* å¢åŠ é»æ“Šç¯„åœ */
        }
        .leaflet-container a.leaflet-popup-close-button:hover {
            color: #b71c1c !important; /* æ»‘é¼ ç§»ä¸Šå»è®Šæ·±ç´…è‰² */
        }
       /* ç²¾ç°¡ç‰ˆ X éµï¼šç¸®å°å¤–æ¡†ä¸¦ç§»è‡³è§’è½ï¼Œä¸æ“‹ä½ä½›èª */
        .leaflet-container a.leaflet-popup-close-button {
            top: 5px !important;      /* èª¿æ•´ä¸Šä¸‹ä½ç½® */
            right: 5px !important;    /* èª¿æ•´å·¦å³ä½ç½® */
            width: 24px !important;   /* ç¸®å°åœ“æ¡†å¯¬åº¦ */
            height: 24px !important;  /* ç¸®å°åœ“æ¡†é«˜åº¦ */
            line-height: 22px !important; /* è®“ X å±…ä¸­ */
            font-size: 16px !important;   /* ç¸®å° X å­—é«” */
            background-color: #ffffff !important; 
            color: #d4af37 !important;
            border: 1.5px solid #d4af37 !important; /* é‚Šæ¡†è®Šç´° */
            border-radius: 50% !important;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1) !important;
            z-index: 1001;
            transition: 0.2s;
        }

        /* æ»‘é¼ ç§»ä¸Šå»è®Šè‰² */
        .leaflet-container a.leaflet-popup-close-button:hover {
            background-color: #d4af37 !important;
            color: #ffffff !important;
        }
    </style>
</head>
<body>

    <div class="brand-header">2026 Vesak Global Lighting<br>è¡›å¡ç¯€å…¨çƒé»ç‡ˆ</div>
    <div class="lang-switch"><button onclick="toggleLang()">EN / ä¸­æ–‡</button></div>

    <div class="header-section">
        <img src="buddha_vesak.png" alt="Buddha" class="buddha-img">
        <div class="slogan-main" id="text-main">ã€Œé¡˜æ…ˆæ‚²ä¹‹å…‰ï¼Œç…§ç ´ä¸–é–“é»‘æš—ã€‚ã€</div>
        <div class="slogan-sub" id="text-sub">é»æ“Šåœ°åœ–é»äº®è“®èŠ±ï¼Œæ‚¨çš„å–„å¿µå°‡èˆ‡å…¨çƒåŒæ­¥é¡¯ç¤ºã€‚</div>
        <div class="counter-box">
            <span id="label-count">å…¨çƒå·²åŒ¯èšï¼š</span>
            <strong id="counter">0</strong>
            <span id="label-unit"> ç›å¿ƒç‡ˆ</span>
        </div>
    </div>

    <div id="map"></div>
    <button class="locate-btn" onclick="locateUser()" title="æˆ‘çš„ä½ç½®">ğŸ“</button>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        // --- 1. Firebase è¨­å®š (è«‹ç¢ºä¿å¡«å…¥æ­£ç¢ºçš„é‡‘é‘°) ---
        const firebaseConfig = {
            apiKey: "AIzaSyC4xsAWSYAmNls4IUUTtUmtQNN4-zcUX50",
  authDomain: "vesak-lighting.firebaseapp.com",
  databaseURL: "https://vesak-lighting-default-rtdb.firebaseio.com",
  projectId: "vesak-lighting",
  storageBucket: "vesak-lighting.firebasestorage.app",
  messagingSenderId: "411320593950",
  appId: "1:411320593950:web:6ae15723a4f7fdf6afc80f",
  measurementId: "G-N618EW3EF2"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // --- 2. ä½›å…‰èœæ ¹è­šè³‡æ–™åº« (100å¥) ---
        const quotes = [
            { zh: "æ…ˆæ‚²å¿ƒæ˜¯ä¸€åˆ‡åŠŸå¾·çš„æ¯é«”ï¼Œæœ‰äº†æ…ˆæ‚²ï¼Œå°±æœ‰äº†ä½›æ³•ã€‚", en: "Compassion is the source of all merits; with it comes the Dharma." },
            { zh: "æå¾—èµ·æ˜¯è°æ˜ï¼Œæ”¾å¾—ä¸‹æ˜¯æ™ºæ…§ï¼Œæèµ·æ”¾ä¸‹æ‰æ˜¯è‡ªåœ¨ã€‚", en: "To lift is clever; to let go is wisdom. Mastering both is freedom." },
            { zh: "å¿ƒå¥½å‘½å°±å¥½ï¼Œæ…ˆæ‚²è–æ½”å¥½ï¼Œå…§åœ¨ç¥¥å’Œèƒ½è½‰åŒ–å¤–åœ¨è’æ¶¼ã€‚", en: "A good heart brings a good life; inner peace transforms desolation." },
            { zh: "çµ¦äººä¿¡å¿ƒï¼Œçµ¦äººå¸Œæœ›ï¼Œçµ¦äººæ–¹ä¾¿ï¼Œæ˜¯äººèˆ‡äººæœ€ç¾çš„é€£çµã€‚", en: "Give confidence, hope, and convenience; these are the best links." },
            { zh: "é¡˜æ…ˆæ‚²ä¹‹å…‰ï¼Œç…§ç ´ä¸–é–“é»‘æš—ï¼Œè®“å—è‹¦éˆé­‚å¾—åˆ°æ…°è—‰ã€‚", en: "May the light of compassion break the darkness and comfort souls." },
            { zh: "å¿ƒä¸­æœ‰ä½›ï¼Œæ‰€è¦‹çš†ä½›ï¼Œç•¶æˆ‘å€‘ä»¥ä½›çœ¼çœ‹ä¸–ç•Œï¼Œä¸–ç•Œå³æ¸…æ·¨ã€‚", en: "With Buddha in heart, all is Buddha. His eyes see a pure world." },
            { zh: "çŸ¥è¶³è€…ï¼Œé›–è‡¥åœ°ä¸ŠçŒ¶ç‚ºå®‰æ¨‚ï¼›ä¸çŸ¥è¶³è€…ï¼Œè™•å¤©å ‚äº¦ä¸ç¨±æ„ã€‚", en: "The content are happy on the ground; the greedy are sad in heaven." },
            { zh: "å¾®ç¬‘æ˜¯è·¨è¶Šåœ‹ç•Œçš„èªè¨€ï¼ŒçœŸèª å‰‡æ˜¯é€šå¾€å¿ƒéˆçš„å”¯ä¸€é“è·¯ã€‚", en: "A smile crosses borders; sincerity is the only path to the soul." },
            { zh: "ä¸€èŠ±ä¸€ä¸–ç•Œï¼Œä¸€è‘‰ä¸€å¦‚ä¾†ï¼Œè¬ç‰©çš†æœ‰å…¶è¦ºé†’çš„ä½›æ€§ã€‚", en: "A world in a flower, a Buddha in a leaf. All have Buddha-nature." },
            { zh: "ä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹çµ‚ï¼Œåœ¨ç´›æ“¾ä¸–é–“å®ˆä½ç´”æ·¨æœ€æ˜¯é›£å¾—ã€‚", en: "Stay true to your intent; keep your purity amidst worldly chaos." },
            { zh: "å»£çµå–„ç·£ï¼Œäº‹äº‹é †åˆ©ï¼Œåœ¨åˆ¥äººçš„éœ€è¦ä¸Šçœ‹è¦‹è‡ªå·±çš„è²¬ä»»ã€‚", en: "Build good affinities for success. See duty in others' needs." },
            { zh: "å¿ƒå®‰èŒ…å±‹ç©©ï¼Œæ€§å®šèœæ ¹é¦™ï¼Œå¹³å‡¡ç”Ÿæ´»ä¹Ÿèƒ½å“å‡ºçœŸå‘³ã€‚", en: "A calm mind stabilizes a hut; pure life has the truest taste." },
            { zh: "éœåå¸¸æ€å·±éï¼Œé–’è«‡è«è«–äººéï¼Œå¾‹å·±è¦åš´ï¼Œå¾…äººè¦å¯¬ã€‚", en: "Reflect on your faults in silence; be strict with self and kind." },
            { zh: "å£èªªå¥½è©±å¦‚åè“®èŠ±ï¼Œå¿ƒæƒ³å¥½æ„å¦‚æ’­è‰¯ç¨®ï¼Œèº«è¡Œå¥½äº‹å¦‚ä¿®å¦é€”ã€‚", en: "Good words are lotuses; good thoughts are seeds; good deeds are paths." },
            { zh: "å¿ä¸€æ™‚é¢¨å¹³æµªéœï¼Œé€€ä¸€æ­¥æµ·é—Šå¤©ç©ºï¼Œå¯¬å®¹æ˜¯å¿ƒéˆçš„æ˜‡è¯ã€‚", en: "Endurance brings calm; stepping back brings space and tolerance." },
            { zh: "éš¨ç·£ä¸æ˜¯éš¨ä¾¿ï¼Œè€Œæ˜¯é †æ‡‰è‡ªç„¶ï¼Œç›¡åŠ›ä¹‹å¾Œå°‡çµæœäº¤çµ¦å› ç·£ã€‚", en: "Following conditions is not careless; let go after trying." },
            { zh: "æ…ˆæ‚²æ²’æœ‰æ•µäººï¼Œæ™ºæ…§ä¸èµ·ç…©æƒ±ï¼Œç”¨æ„›å»åŒ–è§£ä¸–é–“çš„æ¨ã€‚", en: "Compassion has no enemies; resolve hate with love and wisdom." },
            { zh: "æ„Ÿæ©æ˜¯äººç”Ÿæœ€ç¾å¦™çš„éŸ³ç¬¦ï¼Œå®ƒè®“è²§çª®å¯Œæœ‰ï¼Œè®“å­¤ç¨æº«æš–ã€‚", en: "Gratitude is life's best note; it enriches and warms the heart." },
            { zh: "å¿ƒä¸­æœ‰æ„›ï¼Œä¸–ç•Œå°±æ²’æœ‰é»‘æš—ï¼Œé»ç‡ƒå¿ƒç‡ˆä¸åƒ…ç…§äº®è‡ªå·±ä¹ŸæŒ‡å¼•ä»–äººã€‚", en: "With love, there is no darkness. Lighting your lamp guides all." },
            { zh: "å‡¡äº‹ç•™é¤˜åœ°ï¼Œå»ºè¨­å¥½å› ç·£ï¼Œä¸è¦æŠŠè©±èªªæ»¿ï¼Œä¸è¦æŠŠäº‹åšçµ•ã€‚", en: "Leave space for good affinity. Never speak or act too harshly." },
            { zh: "æ”¹éå¿…ç”Ÿæ™ºæ…§ï¼Œè­·çŸ­çµ‚å¿…å—å‚·ï¼Œèª å¯¦é¢å°è‡ªå·±çš„é™°å½±ã€‚", en: "Correcting faults breeds wisdom; face your shadows for light." },
            { zh: "å¿™ï¼Œå°±æ˜¯é€²æ­¥ï¼›è‹¦ï¼Œå°±æ˜¯å¢ä¸Šã€‚åœ¨ç£¨é›£ä¸­é›éŠå‹‡æ°£ã€‚", en: "Busyness is progress; hardship is growth. Forge courage in trials." },
            { zh: "æ°´æ»´çŸ³ç©¿ï¼Œä¸æ˜¯åŠ›é‡å¤§ï¼Œè€Œæ˜¯åŠŸå¤«æ·±ï¼Œå”¯æœ‰æ†å¿ƒèƒ½æŠµé”å½¼å²¸ã€‚", en: "Persistence wears stone. Only constancy reaches the shore." },
            { zh: "å¿ƒå¦‚æ­¢æ°´ï¼Œäº‚è€Œä¸é©šï¼Œåœ¨æ··äº‚å±€å‹¢ä¸­ä¿æŒå®šåŠ›æ˜¯ç¨®ä¿®é¤Šã€‚", en: "Mind like still water, calm in chaos. Staying centered is a virtue." },
            { zh: "ä¸€å¿µä¹‹æ…ˆï¼Œè¬çœ¾å—æƒ ï¼Œä¸€å€‹å°å–„èˆ‰èƒ½é€éè´è¶æ•ˆæ‡‰æº«æš–ä¸–ç•Œã€‚", en: "One kind thought benefits many. A small deed warms the world." },
            { zh: "æ¨å¾—æ¨å¾—ï¼Œæœ‰æ¨æ‰æœ‰å¾—ï¼Œæ”¾ä¸‹æ‰‹ä¸­çš„ç ‚ç¤«æ‰èƒ½æ¡ä½æ˜ç ã€‚", en: "To give is to gain. Let go of gravel to hold the precious pearl." },
            { zh: "å¹³éœçš„å¿ƒæ˜¯æœ€å¼·å¤§çš„æ­¦å™¨ï¼Œå®ƒèƒ½è®“æˆ‘å€‘åœ¨ç‹‚é¢¨æš´é›¨ä¸­çœ‹æ¸…è·¯ã€‚", en: "A calm mind is a powerful weapon; it sees clearly through storms." },
            { zh: "é¢ä¸Šç„¡å—”æ˜¯ä¾›é¤Šï¼Œå£è£¡ç„¡å—”åå¦™é¦™ï¼Œå¾®ç¬‘æ˜¯æœ€ç°¡å–®çš„ä¿®è¡Œã€‚", en: "A smile is an offering; kind words are a fragrance and practice." },
            { zh: "æƒœç¦ã€çµç·£ã€åˆ©äººï¼Œçæƒœç¾æœ‰è³‡æºï¼Œæˆå°±å¤§çœ¾åˆ©ç›Šã€‚", en: "Cherish blessings, build affinities, and benefit the public." },
            { zh: "æ´»åœ¨ç•¶ä¸‹ï¼Œä¸æ†‚å¾€äº‹ï¼Œä¸ç•æœªä¾†ï¼Œå¿ƒåœ¨å“ªè£¡ï¼Œåœ“æ»¿å°±åœ¨å“ªè£¡ã€‚", en: "Live now; fear not the past. Where the heart is, fulfillment is." },
            { zh: "è¬™è™›æ˜¯æ™ºæ…§çš„è¡¨ç¾ï¼Œå®ƒåƒç¨»ç©—ï¼Œæ„ˆæ˜¯é£½æ»¿æˆç†Ÿæ„ˆæ‡‚å¾—ä½é ­ã€‚", en: "Humility is wisdom. Like ripe rice, the fuller it is, the lower it bows." },
            { zh: "æ„›èªå¦‚æ˜¥é¢¨ï¼Œèƒ½æ¶ˆèå¿ƒéˆå†°éœœï¼Œåœ¨å‚·äººè¨€è©å‰è«‹å…ˆæ›ä½æ€è€ƒã€‚", en: "Kind words melt icy hearts. Empathize before speaking hurtfully." },
            { zh: "å¤±æ•—æ˜¯æˆåŠŸçš„å¢Šè…³çŸ³ï¼Œåªè¦å¿ƒç‡ˆä¸æ»…ï¼Œè·Œå€’åªæ˜¯ç‚ºäº†è·³å¾—æ›´ç©©ã€‚", en: "Failure is a stepping stone. Falling is preparation for a leap." },
            { zh: "æ”¾ä¸‹åŸ·è‘—ï¼Œä¸¦éæ”¾æ£„ä¸€åˆ‡ï¼Œè€Œæ˜¯ä¸å†è¢«å¤–å¢ƒæ‰€è½‰ï¼Œæ‰¾å›ä¸»å‹•ã€‚", en: "Detachment is not giving up, but not being swayed by the world." },
            { zh: "ä»¥å¾·å ±æ€¨æ˜¯æœ€é«˜å¢ƒç•Œï¼Œç”¨å¯¬æ•ä»£æ›¿å ±å¾©ï¼Œçµ‚çµä»‡æ¨çš„å¾ªç’°ã€‚", en: "Repay resentment with virtue. Forgiveness ends the cycle of hate." },
            { zh: "å°Šå¸«é‡é“ï¼Œæ„Ÿæ©å¼•å°ï¼Œåœ¨çŸ¥è­˜æ±ªæ´‹ä¸­ï¼Œè¬™å‘æ˜¯æ‰¿è¼‰æ™ºæ…§çš„å®¹å™¨ã€‚", en: "Respect teachers. Humility is the vessel for wisdom in knowledge." },
            { zh: "èª å¯¦ç„¡æ¬ºæ˜¯ç«‹èº«æ ¹æœ¬ï¼Œæ¬ºé¨™ç²å¾—çŸ­æš«åˆ©ç›Šï¼Œå»è¼¸æ‰é•·é äººç”Ÿã€‚", en: "Honesty is the root. Deceit brings short gain but loses the race." },
            { zh: "å‹¤å„‰æŒå®¶ï¼Œæƒœç‰©æ„›ç‰©ï¼Œç°¡ç´„çš„ç”Ÿæ´»å°±æ˜¯å°è‡ªç„¶æœ€å¤§çš„æ…ˆæ‚²ã€‚", en: "Be thrifty. Simple living is the greatest mercy to nature." },
            { zh: "ä¸–ç•Œå’Œå¹³å§‹æ–¼å…§å¿ƒå’Œå¹³ï¼Œå¹³æ¯å¿ƒä¸­æˆ°ç«ï¼Œå¤–åœ¨ä¸–ç•Œè‡ªç„¶ç¥¥å’Œã€‚", en: "World peace starts within. End inner conflict for outer harmony." },
            { zh: "æ³•ç•Œåœ“èï¼Œè¬ç‰©å…±ç”Ÿï¼Œé«”èªçœ¾ç”Ÿä¸€é«”ï¼Œä¾¿ä¸æœƒå‚·å®³ä»–äººã€‚", en: "Harmony in the Dharma; all coexist. Being one prevents hurting others." },
            { zh: "è‡ªè¦ºèˆ‡è¦ºä»–æ˜¯äººç”Ÿçš„é›™ç¿¼ï¼Œå…ˆé»äº®å¿ƒç‡ˆï¼Œå†å»ç…§äº®è¿·é€”æ—…äººã€‚", en: "Self-awareness and awakening others are wings. Light the lost." },
            { zh: "å¹³å‡¡è¦‹å‰å¤§ï¼Œç°¡å–®è¦‹çœŸèª ï¼Œä¸éœ€è¦è¿½æ±‚è½Ÿçƒˆï¼ŒçœŸå¿ƒå³æ˜¯æ°¸æ†ã€‚", en: "See greatness in ordinary. No need for fanfare; truth is eternal." },
            { zh: "å¤§å…¬ç„¡ç§ä¾¿æ˜¯ä½›å¿ƒï¼Œæ”¾ä¸‹å°æˆ‘ç§æ…¾ï¼Œæ‰èƒ½çœ‹è¦‹å¤§æˆ‘çš„åœ“æ»¿ã€‚", en: "Selflessness is Buddha's heart. Let go of ego for fulfillment." },
            { zh: "è¡Œå–„æœ€æ¨‚ï¼Œä¸ç‚ºå›å ±ï¼Œä»˜å‡ºçš„å–œæ‚…æœ¬èº«å°±æ˜¯æœ€å¥½çš„å ±é…¬ã€‚", en: "Goodness is joy. The act of giving is the best reward itself." },
            { zh: "å…§å¿ƒå¹³å®‰ï¼Œå¤–å¢ƒè‡ªç„¶å®‰å¯§ï¼Œç•¶æˆ‘å€‘ä¸å†å°æŠ—ï¼Œä¸–ç•Œå°±æœƒæº«æŸ”ã€‚", en: "Inner peace brings outer calm. Stop fighting for a kind world." },
            { zh: "åœ“æ»¿äººç”Ÿä¸åœ¨æ“æœ‰å¤šå°‘è²¡å¯Œï¼Œè€Œåœ¨æ–¼çµ¦äºˆäº†å¤šå°‘æ…ˆæ‚²èˆ‡æº«æš–ã€‚", en: "Perfect life is not wealth, but the compassion you give the world." },
            { zh: "æ­£å‘æ€è€ƒèƒ½è½‰åŒ–è² èƒ½é‡ï¼Œçœ‹è¦‹é»‘æš—ä¸­çš„æ˜Ÿå…‰æ˜¯èµ°å‡ºå›°å¢ƒçš„é—œéµã€‚", en: "Positive thinking transforms energy. Starlight guides you out." },
            { zh: "å…±ç”Ÿå…±æ¦®ï¼Œå½¼æ­¤æˆå°±ï¼Œåœ¨åˆä½œä¸­æ”¾ä¸‹å‚²æ…¢ï¼Œé«”é©—å’Œè«§åŠ›é‡ã€‚", en: "Coexist and prosper. Drop arrogance for the power of harmony." },
            { zh: "ä½›å…‰æ™®ç…§ï¼Œæ³•æ°´é•·æµï¼Œé¡˜æ™ºæ…§æ³•é›¨æ»‹æ½¤å¿ƒç”°ï¼Œè®“è©æé–‹èŠ±ã€‚", en: "May wisdom's rain nourish hearts and let Bodhi bloom everywhere." },
            { zh: "çœ‹ç ´ä¸–äº‹ï¼Œå¿ƒç„¡ç½£ç¤™ï¼Œæ˜ç™½äº†å› ç·£æœå ±ï¼Œå°±èƒ½æ³°ç„¶é¢å°ç”Ÿæ»…ã€‚", en: "See through the world. Understanding karma lets us face life calmly." },
            { zh: "æ…ˆæ‚²æ˜¯ä¸€æŸå…‰ï¼Œç©¿é€å …ç¡¬é˜²å‚™ï¼Œåœ¨ç†è§£ä¸­æ¶ˆèå°ç«‹çš„å†°ç‰†ã€‚", en: "Compassion is light that pierces defenses and melts opposition." },
            { zh: "çœŸæ­£çš„å¯Œæœ‰æ˜¯å…§å¿ƒçŸ¥è¶³ï¼Œæ“æœ‰çš„å†å¤šï¼Œå¿ƒéˆç©ºè™›ä¹Ÿåªæ˜¯ä¹ä¸ã€‚", en: "True wealth is contentment. An empty soul is but a beggar." },
            { zh: "ä¸æ‚£äººä¹‹ä¸å·±çŸ¥ï¼Œæ‚£ä¸çŸ¥äººä¹Ÿï¼Œå¤šå»ç†è§£ä»–äººè€Œéæ¸´æœ›è¢«ç†è§£ã€‚", en: "Worry not about being unknown. Seek to understand others first." },
            { zh: "å¦‚äººé£²æ°´å†·æš–è‡ªçŸ¥ï¼Œä¿®è¡Œæ˜¯é«”è­‰ï¼Œæ–‡å­—æ›¿ä»£ä¸äº†å¯¦è¸çš„è…³å°ã€‚", en: "Like drinking water, only you know. Words cannot replace deeds." },
            { zh: "ä¸€å¿µå¤©å ‚ï¼Œä¸€å¿µåœ°ç„ï¼Œå¿ƒå¿µæ±ºå®šè™•å¢ƒï¼Œè½‰å¿µå°±æ˜¯å¤©å ‚ã€‚", en: "A thought of heaven or hell. Your mindset dictates your reality." },
            { zh: "æ„›å¿ƒæ˜¯ç„¡åœ‹ç•Œçš„è­·ç…§ï¼Œå®ƒèƒ½è®“æˆ‘å€‘åœ¨ä»»ä½•åœ°æ–¹æ‰¾åˆ°å¿ƒéˆæ•…é„‰ã€‚", en: "Love is a borderless passport; find a spiritual home anywhere." },
            { zh: "è®€æ›¸ä¸å¦‚è¡Œè·¯ï¼Œè¡Œè·¯ä¸å¦‚è­˜äººï¼Œè­˜äººä¸å¦‚ä½›ç¥–é»æ¸¡ã€‚", en: "Experience beats books; meeting people beats travel; Buddha guides all." },
            { zh: "å»£å¤§å¿ƒé‡ï¼ŒåŒ…å®¹è¬ç‰©ï¼Œå¿ƒé‡æ„ˆå¤§ç…©æƒ±æ„ˆå°ï¼Œä¸–ç•Œæ„ˆåŠ é–‹é—Šã€‚", en: "A vast mind embraces all. Larger minds have fewer worries." },
            { zh: "å°å¤±æ„äººè«è«‡å¾—æ„äº‹ï¼Œé€™ä»½é«”è²¼æ˜¯æ…ˆæ‚²åœ¨ç´°ç¯€ä¸­çš„æœ€é«˜å±•ç¾ã€‚", en: "Never boast to the failed. This is the highest form of compassion." },
            { zh: "æ±‚äººä¸å¦‚æ±‚å·±ï¼Œæ±‚å·±ä¸å¦‚æ±‚ä½›ï¼Œæ±‚ä½›æ˜¯å–šé†’å…§åœ¨çš„ä½›æ€§ã€‚", en: "Rely on self over others. Seeking Buddha is awakening the inner one." },
            { zh: "å¿™äººçæƒœå…‰é™°ï¼Œæ‡¶äººè™›æ“²ç”Ÿå‘½ï¼Œå¤§å¿™äººå¾€å¾€æœ€æœ‰æ™‚é–“ã€‚", en: "The busy value time; the lazy waste it. The busy find the most time." },
            { zh: "å¾®ç¬‘æ˜¯ä¸–ç•Œä¸Šæœ€ç¾çš„åç‰‡ï¼Œä¸éœ€æˆæœ¬ï¼Œå»èƒ½å‰µé€ ç„¡æ¯”åƒ¹å€¼ã€‚", en: "A smile is the best card. It costs nothing but creates value." },
            { zh: "åƒè™§å°±æ˜¯ä¾¿å®œï¼Œç‰©è³ªçœ‹ä¼¼æå¤±ï¼Œäººæ ¼èˆ‡ç¦å ±å»æ˜¯æ·±åšç©ç´¯ã€‚", en: "Loss is gain. Material loss is an accumulation of future blessings." },
            { zh: "åªè¦æœ‰å‹‡æ°£ï¼Œä¸–ç•Œå°±æ²’æœ‰é›£äº‹ï¼Œææ‡¼æ˜¯æˆ‘å€‘è‡ªè¨­çš„åœç‰†ã€‚", en: "With courage, nothing is impossible. Fear is a self-made wall." },
            { zh: "æœ‰ä½›æ³•å°±æœ‰è¾¦æ³•ï¼Œåœ¨çµ•æœ›ç›¡é ­ï¼Œæ™ºæ…§èƒ½ç‚ºæˆ‘å€‘é–‹æ‹“å‡ºç”Ÿè·¯ã€‚", en: "With Dharma, there's a way. Wisdom carves a path through despair." },
            { zh: "ä¿¡è­½æ˜¯äººçš„ç¬¬äºŒç”Ÿå‘½ï¼Œå¤±å»ä¿¡ç”¨ï¼Œå†å¤šè²¡å¯Œä¹Ÿé›£ä»¥ç«‹è¶³ã€‚", en: "Reputation is life. Without credit, wealth cannot help you stand." },
            { zh: "åšäº‹ç²¾é€²ï¼Œç‚ºäººåšé“ï¼Œå°å·¥ä½œå…¨åŠ›ä»¥èµ´ï¼Œå°ä»–äººç•™æœ‰å¯¬åšã€‚", en: "Be diligent and kind. Give your best and show mercy to others." },
            { zh: "å¸ƒæ–½ä¸åƒ…æ˜¯è²¡ç‰©çµ¦äºˆæ›´æ˜¯å¿ƒå¿µæµå‹•ï¼Œå“ªæ€•æ˜¯ä¸€å€‹é—œå¿ƒçš„çœ¼ç¥ã€‚", en: "Giving is a flow of intent. Even a caring look is an act of charity." },
            { zh: "å­¸ç¿’å¦‚æ˜¥èµ·ä¹‹è‹—ï¼Œä¸è¦‹å…¶å¢æ—¥æœ‰æ‰€é•·ï¼›è¼Ÿå­¸å¦‚ç£¨åˆ€ä¹‹çŸ³ï¼Œæ—¥æœ‰æ‰€è™§ã€‚", en: "Learning is like spring sprouts; growth is daily. Stopping is a loss." },
            { zh: "å¯¬å¤§æ˜¯ç¦ï¼Œæ…ˆæ‚²æ˜¯å£½ï¼Œå¯¬å®¹çš„å¿ƒå¸å¼•ç¦æ°£ï¼Œæ…ˆæ‚²çš„äººè‡ªç„¶é•·å£½ã€‚", en: "Tolerance is bliss; mercy is longevity. Compassion brings long life." },
            { zh: "å¿ƒä¸­æœ‰æ³•ï¼Œè¡Œä¸­æœ‰ç¦®ï¼Œå°‡ä½›æ³•å…§åŒ–ç‚ºæº–å‰‡ï¼Œè¡Œç‚ºè‡ªç„¶åˆç¦®ã€‚", en: "Dharma in heart, courtesy in action. Truth makes behavior proper." },
            { zh: "è‡ªå¾‹æ˜¯æœ€å¥½çš„ç®¡ç†ï¼Œèƒ½æŒæ§æƒ…ç·’èˆ‡æ¬²æœ›çš„äººï¼Œæ‰æ˜¯çœŸæ­£å¼·è€…ã€‚", en: "Self-discipline is best. One who controls desires is truly strong." },
            { zh: "æ‡‚å¾—æ’éšŠå°±æ˜¯æœ‰ç¦®ï¼Œåœ¨å…¬å…±ç§©åºä¸­å±•ç¾è€å¿ƒï¼Œåæ˜ ä¿®é¤Šã€‚", en: "Waiting in line is courtesy. Patience reflects one's cultivation." },
            { zh: "äººçª®å¿—ä¸çª®ï¼Œç‰©è³ªåŒ±ä¹å¯ä»¥å¿å—ï¼Œç²¾ç¥å¢®è½æ‰æ˜¯çœŸæ­£è²§çª®ã€‚", en: "Poor in wealth but not in will. Spiritual decay is true poverty." },
            { zh: "åšäº‹è¦å¦‚ç¹”å¸ƒï¼Œä¸€é‡ä¸€ç·šç²¾é›•ç´°ç¢ï¼Œå°ˆæ³¨èˆ‡è€å¿ƒç¹”å°±ç‡¦çˆ›äººç”Ÿã€‚", en: "Work like weaving. Focus and patience weave a brilliant life." },
            { zh: "ä¸€å¿µä¹‹å·®å¤©å£¤ä¹‹åˆ¥ï¼Œåœ¨é—œéµæ™‚åˆ»å®ˆä½å–„å¿µï¼Œé¿å…å¢®å…¥æ·±æ·µã€‚", en: "A slight error makes a huge difference. Hold goodness at key moments." },
            { zh: "æŸ”å’Œå¿è¾±èƒ½åŒ–è§£æš´æˆ¾ä¹‹æ°£ï¼Œåƒæ°´æŸ”è»Ÿï¼Œå»èƒ½ç©¿é€å …ç¡¬éšœç¤™ã€‚", en: "Gentle patience dissolves rage. Soft water pierces hard obstacles." },
            { zh: "çæƒœç”Ÿå‘½æ„Ÿæ©å› ç·£ï¼Œé€™å£å‘¼å¸æ˜¯å®‡å®™ç„¡æ•¸å› ç·£çš„æˆå°±ã€‚", en: "Cherish life and be grateful. This breath is a cosmic achievement." },
            { zh: "æ„›è­·å…¬ç‰©é«”è²¼å¤§çœ¾ï¼Œå…¬å…±å ´åˆçš„å…‹åˆ¶èˆ‡é«”è«’æ˜¯æ…ˆæ‚²çš„å¯¦è¸ã€‚", en: "Care for public property. Restraint is a practice of compassion." },
            { zh: "å…±å‰µå¹¸ç¦åŒåœ“ç¨®æ™ºï¼Œè®“å°æˆ‘èå…¥å¤§çœ¾åˆ©ä»–ï¼Œåœ“æ»¿å…±åŒäººæ ¼ã€‚", en: "Create bliss together. Merge the small self into the public good." },
            { zh: "æŠŠæ­¡å–œå¸¶å›å®¶ï¼Œè®“å®¶äººæ„Ÿå—æ”¹è®Šï¼Œå®¶åº­æ˜¯ä¿®è¡Œçš„ç¬¬ä¸€é“å ´ã€‚", en: "Bring joy home. Family harmony is the first place of practice." },
            { zh: "é¢ä¸Šç„¡å—”ï¼Œå£è£¡ç„¡å—”ï¼Œæœ€ç°¡å–®çš„ä¿®è¡Œå°±æ˜¯ä¸€å€‹æº«æš–å¾®ç¬‘ã€‚", en: "No anger in face or words. The simplest practice is a warm smile." },
            { zh: "æ”¾ä¸‹åŸ·è‘—ä¸¦éæ”¾æ£„ï¼Œè€Œæ˜¯ä¸å†è¢«å¤–å¢ƒæ‰€è½‰ï¼Œæ‰¾å›ä¸»å‹•æ¬Šã€‚", en: "Detachment is not giving up, but regaining control of your life." },
            { zh: "èª å¯¦ç„¡æ¬ºæ˜¯ç«‹èº«æ ¹æœ¬ï¼Œæ¬ºé¨™è´å¾—æš«æ™‚åˆ©ç›Šï¼Œè¼¸æ‰é•·é äººç”Ÿã€‚", en: "Honesty is the root. Deceit brings short gain but loses the race." },
            { zh: "ä»¥å¾·å ±æ€¨æ˜¯æœ€é«˜å¢ƒç•Œï¼Œç”¨å¯¬æ•ä»£æ›¿å ±å¾©ï¼Œçµ‚çµä»‡æ¨å¾ªç’°ã€‚", en: "Repay resentment with virtue. Forgiveness ends the cycle of hate." },
            { zh: "æ³•ç•Œåœ“èè¬ç‰©å…±ç”Ÿï¼Œé«”èªçœ¾ç”Ÿä¸€é«”ï¼Œä¸åšå‡ºå‚·å®³ä»–äººçš„è¡Œç‚ºã€‚", en: "Harmony in the Dharma. Knowing we are one prevents hurting others." },
            { zh: "å…§å¿ƒå¹³å®‰å¤–å¢ƒå®‰å¯§ï¼Œç•¶æˆ‘å€‘ä¸å†å°æŠ—ä¸–ç•Œï¼Œä¸–ç•Œå°±æœƒå°æˆ‘å€‘æº«æŸ”ã€‚", en: "Inner peace brings outer calm. Stop fighting for a kind world." },
            { zh: "æ­£å‘æ€è€ƒè½‰åŒ–è² èƒ½é‡ï¼Œçœ‹è¦‹é»‘æš—ä¸­çš„æ˜Ÿå…‰æ˜¯èµ°å‡ºå›°å¢ƒçš„é—œéµã€‚", en: "Positive thinking transforms energy. Starlight guides you out." },
            { zh: "å¹³å‡¡ä¸­è¦‹å‰å¤§ï¼Œç°¡å–®ä¸­è¦‹çœŸèª ï¼Œæ¯ä¸€åˆ»çš„çœŸå¿ƒéƒ½æ˜¯æ°¸æ†ã€‚", en: "See greatness in ordinary. Every sincere moment is eternal." },
            { zh: "æ„Ÿæ©æ˜¯äººç”Ÿæœ€ç¾å¦™éŸ³ç¬¦ï¼Œè®“è²§çª®è®Šå¯Œæœ‰ï¼Œè®“å­¤ç¨è®Šæº«æš–ã€‚", en: "Gratitude is life's best note; it enriches and warms the soul." },
            { zh: "æœ‰ä½›æ³•å°±æœ‰è¾¦æ³•ï¼Œåœ¨çµ•æœ›ç›¡é ­ï¼Œæ™ºæ…§èƒ½ç‚ºæˆ‘å€‘é–‹æ‹“å‡ºè·¯ã€‚", en: "With Dharma, there's a way. Wisdom carves a path through despair." },
            { zh: "è‡ªè¦ºèˆ‡è¦ºä»–æ˜¯äººç”Ÿçš„é›™ç¿¼ï¼Œå…ˆé»äº®è‡ªå·±ï¼Œå†å»ç…§äº®è¿·é€”æ—…äººã€‚", en: "Self-awareness and awakening others are wings. Light the lost." },
            { zh: "å¤§å…¬ç„¡ç§ä¾¿æ˜¯ä½›å¿ƒï¼Œæ”¾ä¸‹å°æˆ‘ç§æ…¾ï¼Œçœ‹è¦‹å¤§æˆ‘çš„æµ©ç€šåœ“æ»¿ã€‚", en: "Selflessness is Buddha's heart. Let go of ego for the Great Self." },
            { zh: "è¡Œå–„æœ€æ¨‚ä¸ç‚ºå›å ±ï¼Œä»˜å‡ºçš„å–œæ‚…æœ¬èº«å°±æ˜¯æœ€å¥½çš„å ±é…¬ã€‚", en: "Goodness is joy. The act of giving is the best reward itself." },
            { zh: "å¿ƒä¸­æœ‰ä½›æ‰€è¦‹çš†ä½›ï¼Œä»¥ä½›çœ¼çœ‹ä¸–ç•Œï¼Œä¸–ç•Œå°±æ˜¯ä¸€ç‰‡æ¸…æ·¨ã€‚", en: "With Buddha in heart, all is Buddha. His eyes see a pure world." },
            { zh: "è¬™è™›æ˜¯æ™ºæ…§çš„è¡¨ç¾ï¼Œæ„ˆæ˜¯é£½æ»¿æˆç†Ÿçš„ç¨»ç©—ï¼Œæ„ˆæ‡‚å¾—ä½é ­ã€‚", en: "Humility is wisdom. Like ripe rice, the fuller it is, the lower it bows." },
            { zh: "æ„›å¿ƒæ˜¯ç„¡åœ‹ç•Œè­·ç…§ï¼Œè®“æˆ‘å€‘åœ¨ä»»ä½•åœ°æ–¹æ‰¾åˆ°å¿ƒéˆæ•…é„‰ã€‚", en: "Love is a borderless passport; find a spiritual home anywhere." },
            { zh: "å¿ƒæ‡·æ„Ÿæ©ç²¾é€²ä¸æ‡ˆï¼Œé †æ‡‰è‡ªç„¶è€å¯¦ä¿®è¡Œï¼Œæ…ˆæ‚²å–œæ¨æ³•ç•Œåœ“èã€‚", en: "Be grateful and diligent. Practice with honesty for cosmic harmony." },
            { zh: "å¾®ç¬‘æ˜¯è·¨è¶Šåœ‹ç•Œçš„èªè¨€ï¼ŒçœŸèª æ˜¯é€šå¾€å¿ƒéˆçš„å”¯ä¸€é“è·¯ã€‚", en: "A smile crosses borders; sincerity is the only path to the soul." },
            { zh: "æ³•æ°´é•·æµä½›å…‰æ™®ç…§ï¼ŒåŒåœ“ç¨®æ™ºå…±å‰µå¹¸ç¦ï¼Œåœ“æ»¿è‡ªåœ¨çš„äººç”Ÿã€‚", en: "May Dharma flow and Buddha shine. Create happiness for a perfect life." }
        ];

        // --- 3. è“®èŠ± SVG èˆ‡åœ°åœ–é‚è¼¯ ---
        const lotusSVG = `<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <path d="M50 90 Q70 90 85 70 Q70 50 50 60 Q30 50 15 70 Q30 90 50 90" fill="#ff9900" opacity="0.6"/>
            <path d="M50 90 Q85 85 95 60 Q75 40 50 55 Q25 40 5 60 Q15 85 50 90" fill="#ffcc00" opacity="0.8"/>
            <path d="M50 90 Q70 80 75 45 Q50 30 50 10 Q50 30 25 45 Q30 80 50 90" fill="#ffd700"/></svg>`;

        
       let map; // 1. å…ˆåœ¨æœ€å¤–é¢å®£å‘Šè®Šæ•¸

try {
   // ä¿®æ”¹é€™è£¡ï¼šåŠ å…¥ minZoom, maxBounds èˆ‡ worldCopyJump
map = L.map('map', { 
    attributionControl: false,
    minZoom: 2,           // é™åˆ¶æœ€å°ç¸®æ”¾ï¼Œé¿å…çœ‹åˆ°å¤ªå¤šé‡è¤‡çš„åœ°åœ–
    worldCopyJump: true   // ç•¶ä½ æ»‘å‹•è¶…é 180 åº¦æ™‚ï¼Œå®ƒæœƒè‡ªå‹•è·³è½‰å›ä¸»åœ°åœ–
}).setView([20, 15], 2);

// åŒæ™‚åœ¨ TileLayer åŠ å…¥ noWrap: true
L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
    attribution: 'Â© OpenStreetMap | è¡›å¡ç¯€é»ç‡ˆ',
    noWrap: true,      // é—œéµï¼ç¦æ­¢åº•åœ–å·¦å³é‡è¤‡å‡ºç¾
    bounds: [[-90, -180], [90, 180]] // é™åˆ¶åœ°åœ–ç¯„åœ
}).addTo(map);
            const createLotusIcon = () => L.divIcon({
                html: `<div class="lotus-marker">${lotusSVG}</div>`,
                className: 'custom-div-icon', iconSize: [45, 45], iconAnchor: [22, 40]
            });

            // é»æ“Šå³é»ç‡ˆ
            map.on('click', function(e) {
                const q = quotes[Math.floor(Math.random() * quotes.length)];
                db.ref('lamps').push({ lat: e.latlng.lat, lng: e.latlng.lng, quoteZh: q.zh, quoteEn: q.en });
                L.popup({ closeButton: true, offset: [0, -20] })
                    .setLatLng(e.latlng)
                    .setContent(`<div class="quote-zh">${q.zh}</div><div class="quote-en">${q.en}</div>`)
                    .openOn(map);
            });

            db.ref('lamps').on('child_added', (snapshot) => {
                const data = snapshot.val();
                const marker = L.marker([data.lat, data.lng], { icon: createLotusIcon() }).addTo(map);
                marker.bindPopup(`<div class="quote-zh">${data.quoteZh}</div><div class="quote-en">${data.quoteEn}</div>`, { closeButton: true });
            });

            db.ref('lamps').on('value', (snapshot) => {
                document.getElementById('counter').innerText = snapshot.numChildren() || 0;
            });
        } catch (e) { console.error("åœ°åœ–è¼‰å…¥éŒ¯èª¤:", e); }

        let currentLang = 'zh';
        function toggleLang() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            document.getElementById('text-main').innerText = currentLang === 'zh' ? "ã€Œé¡˜æ…ˆæ‚²ä¹‹å…‰ï¼Œç…§ç ´ä¸–é–“é»‘æš—ã€‚ã€" : "â€œMay the light of compassion dispel the darkness.â€";
            document.getElementById('text-sub').innerText = currentLang === 'zh' ? "é»æ“Šåœ°åœ–é»äº®è“®èŠ±ï¼Œæ‚¨çš„å–„å¿µå°‡èˆ‡å…¨çƒåŒæ­¥é¡¯ç¤ºã€‚" : "Click to light a lotus; your goodness will be shown globally.";
            document.getElementById('label-count').innerText = currentLang === 'zh' ? "å…¨çƒå·²åŒ¯èšï¼š" : "Global Gathering: ";
            document.getElementById('label-unit').innerText = currentLang === 'zh' ? " ç›å¿ƒç‡ˆ" : " Lamps";
        }
   // --- æœ€çµ‚å„ªåŒ–ç‰ˆå®šä½åŠŸèƒ½ ---
        function locateUser() {
            if (!map) return;
            // åŠ å…¥ enableHighAccuracy: trueï¼Œé€™èƒ½å¼·åˆ¶æ‰‹æ©Ÿå•Ÿå‹• GPS è€Œéåƒ…ç”¨åŸºåœ°å°
            map.locate({
                setView: true, 
                maxZoom: 12, 
                enableHighAccuracy: true 
            });
        }

        // æˆåŠŸå®šä½æ™‚çš„å‹•ä½œ (åªå¯«ä¸€æ¬¡)
        map.on('locationfound', function(e) {
            // æ¸…é™¤èˆŠçš„å®šä½åœˆï¼ˆé¸æ“‡æ€§ï¼‰ï¼Œä¸¦ç•«å‡ºæ–°çš„ç™¼å…‰åœˆ
            L.circle(e.latlng, {
                radius: 600,
                color: '#ffd700',
                fillColor: '#ffd700',
                fillOpacity: 0.4,
                weight: 2
            }).addTo(map);
            
            // æç¤ºä½¿ç”¨è€…å·²åˆ°é”å…¶ä½ç½®
            console.log("å®šä½æˆåŠŸï¼Œåº§æ¨™ï¼š" + e.latlng);
        });

        // å®šä½å¤±æ•—æ™‚çš„è™•ç†
        map.on('locationerror', function(e) {
            alert("å®šä½å¤±æ•—ï¼šè«‹ç¢ºä¿æ‰‹æ©Ÿ GPS å·²é–‹å•Ÿï¼Œä¸¦åœ¨ç€è¦½å™¨é ‚éƒ¨é»æ“Šã€Œé–é ­ã€åœ–ç¤ºå…è¨±ä½ç½®æ¬Šé™ã€‚");
        });
    </script>
</body>
</html>









